// Copyright (c) Microsoft. All rights reserved.
import { _LogSource as LogSource, _TraceLogger as TraceLogger } from '@microsoft/sp-diagnostics';
/**
 * Global error handler.
 *
 * The purpose of this class is to help measure uncaught/async errors from within the app infra.
 *
 * @internal
 */
var SPGlobalErrorHandler = /** @class */ (function () {
    function SPGlobalErrorHandler() {
    }
    /**
     * Traces errors to _TraceLogger to measure the occurrence
     *
     * The signature matches window.onerror
     */
    SPGlobalErrorHandler.basicTracingHandler = function (message, filename, lineno, colno, error) {
        var eventName = 'window.onerror';
        if (filename && SPGlobalErrorHandler._isFromFile(filename, 'CKEDITOR')) {
            // CK editor gets special handling because we want to monitor any issues with Edge
            SPGlobalErrorHandler._logErrorFromFile(message, SPGlobalErrorHandler._ckLogSource, lineno, colno, error, eventName);
        }
        else {
            var genericError = error ||
                new Error("Error:" + message + ", file:" + filename + ", line:" + lineno + ", column:" + colno);
            TraceLogger.logError(SPGlobalErrorHandler._genericLogSource, genericError, eventName);
        }
    };
    SPGlobalErrorHandler._isFromFile = function (filename, match) {
        return filename.length > 0 && filename.toUpperCase().indexOf(match) !== -1;
    };
    SPGlobalErrorHandler._logErrorFromFile = function (message, logSource, lineno, colno, error, eventName) {
        var fileError = error ||
            new Error("Error:" + message + ", line:" + lineno + ", column:" + colno);
        TraceLogger.logError(logSource, fileError, eventName);
    };
    SPGlobalErrorHandler._ckLogSource = LogSource.create('CKGlobalError');
    SPGlobalErrorHandler._genericLogSource = LogSource.create('OtherGlobalError');
    return SPGlobalErrorHandler;
}());
export default SPGlobalErrorHandler;
//# sourceMappingURL=SPGlobalErrorHandler.js.map