{"version":3,"file":"PackageLookup.js","sourceRoot":"","sources":["../../src/logic/PackageLookup.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;AAI3D,MAAa,aAAa;IAGxB;QACE,IAAI,CAAC,WAAW,GAAG,IAAI,GAAG,EAAuB,CAAC;IACpD,CAAC;IAEM,QAAQ,CAAC,IAAiB;QAC/B,MAAM,KAAK,GAAkB,CAAC,IAAI,CAAC,CAAC;QAEpC,gFAAgF;QAChF,YAAY;QAEZ,iDAAiD;QACjD,OAAO,IAAI,EAAE;YACX,MAAM,OAAO,GAA4B,KAAK,CAAC,KAAK,EAAE,CAAC;YACvD,IAAI,CAAC,OAAO,EAAE;gBACZ,MAAM;aACP;YAED,KAAK,MAAM,KAAK,IAAI,OAAO,CAAC,QAAQ,EAAE;gBACpC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACnB;YAED,MAAM,GAAG,GAAW,OAAO,CAAC,cAAc,CAAC;YAE3C,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBAC9B,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;aACpC;SACF;IACH,CAAC;IAEM,UAAU,CAAC,cAAsB;QACtC,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;IAC9C,CAAC;CACF;AAnCD,sCAmCC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\nimport { BasePackage } from './base/BasePackage';\r\n\r\nexport class PackageLookup {\r\n  private _packageMap: Map<string, BasePackage>;\r\n\r\n  constructor() {\r\n    this._packageMap = new Map<string, BasePackage>();\r\n  }\r\n\r\n  public loadTree(root: BasePackage): void {\r\n    const queue: BasePackage[] = [root];\r\n\r\n    // We want the lookup to return the shallowest match, so this is a breadth first\r\n    // traversal\r\n\r\n    // tslint:disable-next-line:no-constant-condition\r\n    while (true) {\r\n      const current: BasePackage | undefined = queue.shift();\r\n      if (!current) {\r\n        break;\r\n      }\r\n\r\n      for (const child of current.children) {\r\n        queue.push(child);\r\n      }\r\n\r\n      const key: string = current.nameAndVersion;\r\n\r\n      if (!this._packageMap.has(key)) {\r\n        this._packageMap.set(key, current);\r\n      }\r\n    }\r\n  }\r\n\r\n  public getPackage(nameAndVersion: string): BasePackage | undefined {\r\n    return this._packageMap.get(nameAndVersion);\r\n  }\r\n}\r\n"]}