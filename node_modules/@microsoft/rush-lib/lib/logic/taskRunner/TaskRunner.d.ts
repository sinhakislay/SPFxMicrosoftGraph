import { Terminal } from '@microsoft/node-core-library';
import { ITask } from './ITask';
export interface ITaskRunnerOptions {
    quietMode: boolean;
    parallelism: string | undefined;
    changedProjectsOnly: boolean;
    allowWarningsInSuccessfulBuild: boolean;
    terminal?: Terminal;
}
/**
 * A class which manages the execution of a set of tasks with interdependencies.
 * Initially, and at the end of each task execution, all unblocked tasks
 * are added to a ready queue which is then executed. This is done continually until all
 * tasks are complete, or prematurely fails if any of the tasks fail.
 */
export declare class TaskRunner {
    private _tasks;
    private _changedProjectsOnly;
    private _allowWarningsInSuccessfulBuild;
    private _buildQueue;
    private _quietMode;
    private _hasAnyFailures;
    private _hasAnyWarnings;
    private _parallelism;
    private _currentActiveTasks;
    private _totalTasks;
    private _completedTasks;
    private _terminal;
    constructor(orderedTasks: ITask[], options: ITaskRunnerOptions);
    /**
     * Executes all tasks which have been registered, returning a promise which is resolved when all the
     * tasks are completed successfully, or rejects when any task fails.
     */
    execute(): Promise<void>;
    /**
     * Pulls the next task with no dependencies off the build queue
     * Removes any non-ready tasks from the build queue (this should only be blocked tasks)
     */
    private _getNextTask;
    /**
     * Helper function which finds any tasks which are available to run and begins executing them.
     * It calls the complete callback when all tasks are completed, or rejects if any task fails.
     */
    private _startAvailableTasks;
    /**
     * Marks a task as having failed and marks each of its dependents as blocked
     */
    private _markTaskAsFailed;
    /**
     * Marks a task and all its dependents as blocked
     */
    private _markTaskAsBlocked;
    /**
     * Marks a task as being completed, and removes it from the dependencies list of all its dependents
     */
    private _markTaskAsSuccess;
    /**
     * Marks a task as being completed, but with warnings written to stderr, and removes it from the dependencies
     * list of all its dependents
     */
    private _markTaskAsSuccessWithWarning;
    /**
     * Marks a task as skipped.
     */
    private _markTaskAsSkipped;
    private _getCurrentCompletedTaskString;
    /**
     * Prints out a report of the status of each project
     */
    private _printTaskStatus;
    private _printStatus;
    /**
     * Remove trailing blanks, and all middle lines if text is large
     */
    private _abridgeTaskReport;
}
//# sourceMappingURL=TaskRunner.d.ts.map