"use strict";
// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.
// See LICENSE in the project root for license information.
Object.defineProperty(exports, "__esModule", { value: true });
const LinkManagerFactory_1 = require("../../logic/LinkManagerFactory");
const BaseRushAction_1 = require("./BaseRushAction");
class LinkAction extends BaseRushAction_1.BaseRushAction {
    constructor(parser) {
        super({
            actionName: 'link',
            summary: 'Create node_modules symlinks for all projects',
            documentation: 'Create node_modules symlinks for all projects.  This operation is normally performed'
                + ' automatically as part of "rush install" or "rush update".  You should only need to use "rush link"'
                + ' if you performed "rush unlink" for some reason, or if you specified the "--no-link" option'
                + ' for "rush install" or "rush update".',
            parser
        });
    }
    onDefineParameters() {
        this._force = this.defineFlagParameter({
            parameterLongName: '--force',
            parameterShortName: '-f',
            description: 'Deletes and recreates all links, even if the filesystem state seems to indicate that this is ' +
                'unnecessary.'
        });
    }
    run() {
        const linkManager = LinkManagerFactory_1.LinkManagerFactory.getLinkManager(this.rushConfiguration);
        return linkManager.createSymlinksForProjects(this._force.value);
    }
}
exports.LinkAction = LinkAction;
//# sourceMappingURL=LinkAction.js.map