{"version":3,"file":"TrustCertTask.js","sourceRoot":"","sources":["../src/TrustCertTask.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;AAE3D,gEAAsD;AAEtD,iDAGwB;AAExB;;;;;;GAMG;AACH,MAAa,aAAc,SAAQ,0BAAc;IAC/C;QACE,KAAK,CAAC,YAAY,CAAC,CAAC;IACtB,CAAC;IAEM,WAAW,CAAC,IAAiB,EAAE,gBAA0C;QAC9E,MAAM,WAAW,GAAiB,gCAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAEhE,IAAI,WAAW,CAAC,cAAc,IAAI,WAAW,CAAC,MAAM,EAAE;YACpD,gBAAgB,EAAE,CAAC;SACpB;aAAM;YACL,gBAAgB,CAAC,yCAAyC,CAAC,CAAC;SAC7D;IACH,CAAC;CACF;AAdD,sCAcC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\nimport { GulpTask } from '@microsoft/gulp-core-build';\r\nimport * as Gulp from 'gulp';\r\nimport {\r\n  ICertificate,\r\n  ensureCertificate\r\n} from './certificates';\r\n\r\n/**\r\n * This task generates and trusts a development certificate. The certificate is self-signed\r\n *  and stored, along with its private key, in the user's home directory. On Windows, it's\r\n *  trusted as a root certification authority in the user certificate store. On macOS, it's\r\n *  trusted as a root cert in the keychain. On other platforms, the certificate is generated\r\n *  and signed, but the user must trust it manually.\r\n */\r\nexport class TrustCertTask extends GulpTask<void> {\r\n  constructor() {\r\n    super('trust-cert');\r\n  }\r\n\r\n  public executeTask(gulp: typeof Gulp, completeCallback: (error?: string) => void): void {\r\n    const certificate: ICertificate = ensureCertificate(true, this);\r\n\r\n    if (certificate.pemCertificate && certificate.pemKey) {\r\n      completeCallback();\r\n    } else {\r\n      completeCallback('Error trusting development certificate.');\r\n    }\r\n  }\r\n}\r\n"]}